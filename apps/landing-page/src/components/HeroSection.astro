---
---
<section class="relative overflow-hidden min-h-screen">
  <!-- Magnetic Time Grid Background -->
  <div class="fixed inset-0 -z-10 bg-background">
    <canvas id="magnetic-grid" class="absolute inset-0 h-full w-full opacity-40"></canvas>
    
    <!-- Floating Glass Cards (Visual Elements) -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="float-element absolute top-[15%] left-[10%] h-24 w-40 rounded-xl border border-foreground/10 bg-foreground/5 p-4 backdrop-blur-md dark:border-white/10 dark:bg-white/5 shadow-2xl skew-y-6 rotate-12 opacity-0">
        <div class="h-2 w-12 rounded-full bg-primary/20 mb-2"></div>
        <div class="h-2 w-24 rounded-full bg-foreground/10"></div>
      </div>
      <div class="float-element absolute top-[25%] right-[15%] h-32 w-32 rounded-full border border-primary/10 bg-primary/5 backdrop-blur-lg shadow-[0_0_30px_-5px_rgba(var(--primary),0.2)] -rotate-6 scale-75 opacity-0"></div>
      <div class="float-element absolute bottom-[20%] left-[20%] h-16 w-16 rounded-lg border border-foreground/5 bg-gradient-to-br from-primary/20 to-transparent backdrop-blur-sm rotate-45 opacity-0"></div>
    </div>
  </div>

  <div class="flex min-h-screen flex-col items-center justify-center px-4 pt-20">
    <!-- Animated Badge with Glow -->
    <div id="hero-badge" class="mb-8 flex items-center gap-2 rounded-full border border-primary/20 bg-primary/5 px-4 py-1.5 text-xs font-medium text-primary backdrop-blur-sm shadow-[0_0_15px_-3px_rgba(var(--primary),0.3)]">
      <div class="h-1.5 w-1.5 animate-pulse rounded-full bg-primary shadow-[0_0_10px_2px_rgba(var(--primary),0.5)]"></div>
      Now in Public Beta
    </div>

    <!-- Split Text Headline (Prepared for Stagger) -->
    <h1 class="max-w-4xl text-center text-5xl font-bold leading-[1.1] tracking-tight md:text-7xl lg:text-8xl">
      <div class="overflow-hidden"><span class="hero-line block">The ultimate</span></div>
      <div class="overflow-hidden"><span class="hero-line block">bulk scheduler for</span></div>
      <div class="overflow-hidden">
        <span class="hero-line block bg-gradient-to-r from-primary via-orange-500 to-primary bg-[length:200%_auto] bg-clip-text text-transparent animate-gradient">
          Twitter power users.
        </span>
      </div>
    </h1>

    <p id="hero-desc" class="mt-8 max-w-2xl text-center text-lg text-muted-foreground md:text-xl opacity-0 translate-y-4">
      Schedule hundreds of tweets in minutes, not hours. <br class="hidden md:block" />Built for creators who value their time and impact.
    </p>
    
    <div id="hero-cta" class="mt-12 flex flex-col items-center gap-4 sm:flex-row opacity-0 translate-y-4">
      <button class="cta-button group relative flex h-12 items-center justify-center overflow-hidden rounded-full bg-primary px-8 font-medium text-primary-foreground">
        <span class="absolute inset-0 bg-white/20 translate-y-[100%] transition-transform duration-300 group-hover:translate-y-0"></span>
        <span class="relative z-10 flex items-center gap-2">
          Get Started for Free
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform group-hover:translate-x-1"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
        </span>
      </button>
      <button class="cta-button h-12 rounded-full border border-border px-8 font-medium transition-colors hover:bg-accent hover:text-accent-foreground">
        View Demo
      </button>
    </div>

    <div id="hero-scroll" class="mt-20 flex flex-col items-center gap-4 opacity-0">
      <span class="text-[10px] uppercase tracking-[0.2em] text-muted-foreground">Scroll to explore</span>
      <div class="h-12 w-px overflow-hidden bg-border">
        <div id="scroll-indicator" class="h-full w-full bg-primary"></div>
      </div>
    </div>
    
    <!-- Theme Toggle Button -->
    <button
      id="theme-toggle"
      class="fixed top-6 right-6 z-50 rounded-full border border-border bg-background/50 p-2 text-foreground backdrop-blur-md transition-colors hover:bg-accent"
      aria-label="Toggle theme"
    >
      <!-- Sun Icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="hidden dark:block"
      >
        <circle cx="12" cy="12" r="4"></circle>
        <path d="M12 2v2"></path>
        <path d="M12 20v2"></path>
        <path d="m4.93 4.93 1.41 1.41"></path>
        <path d="m17.66 17.66 1.41 1.41"></path>
        <path d="M2 12h2"></path>
        <path d="M20 12h2"></path>
        <path d="m6.34 17.66-1.41 1.41"></path>
        <path d="m19.07 4.93-1.41 1.41"></path>
      </svg>
      <!-- Moon Icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="block dark:hidden"
      >
        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
      </svg>
    </button>
  </div>
</section>

<script>
	import gsap from 'gsap';

	// --- 1. Magnetic Time Grid ---
	class MagneticGrid {
		canvas: HTMLCanvasElement;
		ctx: CanvasRenderingContext2D;
		points: { x: number; y: number; angle: number }[] = [];
		mouseX = -1000;
		mouseY = -1000;
		gridSize = 40; 
        gridColor = 'rgba(150, 150, 150, 0.2)'; // Default fallback
		
		constructor(canvasId: string) {
			const el = document.getElementById(canvasId);
			if (!el) return; // Guard clause
			this.canvas = el as HTMLCanvasElement;
			const context = this.canvas.getContext('2d');
			if (!context) return;
			this.ctx = context;
			
			this.resize();
			this.initEvents();
			this.animate();
		}

		resize() {
			this.canvas.width = window.innerWidth;
			this.canvas.height = window.innerHeight;
            // Handle high-DPI displays
            const dpr = window.devicePixelRatio || 1;
            this.canvas.width = window.innerWidth * dpr;
            this.canvas.height = window.innerHeight * dpr;
            this.ctx.scale(dpr, dpr);
            this.canvas.style.width = `${window.innerWidth}px`;
            this.canvas.style.height = `${window.innerHeight}px`;
            
			this.createPoints();
		}

		createPoints() {
			this.points = [];
            // Use logical dimensions for point calculation
			const cols = Math.ceil(window.innerWidth / this.gridSize) + 1;
			const rows = Math.ceil(window.innerHeight / this.gridSize) + 1;

			for (let i = 0; i < cols; i++) {
				for (let j = 0; j < rows; j++) {
					this.points.push({
						x: i * this.gridSize,
						y: j * this.gridSize,
						angle: 0
					});
				}
			}
		}

		initEvents() {
			window.addEventListener('resize', () => this.resize());
			window.addEventListener('mousemove', (e) => {
				this.mouseX = e.clientX;
				this.mouseY = e.clientY;
			});
		}
        
        getGridColor() {
            // Read CSS variable for muted-foreground
            const style = getComputedStyle(document.documentElement);
            const mutedForeground = style.getPropertyValue('--muted-foreground');
            if (mutedForeground) {
                return `hsl(${mutedForeground} / 0.3)`; // Add opacity
            }
            return 'rgba(150, 150, 150, 0.2)';
        }

		animate() {
            // Clear using logical dimensions
			this.ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
			
            // Update color on each frame to support live theme switching
			this.ctx.strokeStyle = this.getGridColor();
			this.ctx.lineWidth = 1;

			this.points.forEach(p => {
				const dx = this.mouseX - p.x;
				const dy = this.mouseY - p.y;
				const dist = Math.sqrt(dx * dx + dy * dy);
				const maxDist = 250;
				let intensity = 0;

				if (dist < maxDist) {
					intensity = 1 - (dist / maxDist);
					const targetAngle = Math.atan2(dy, dx);
					// Smooth interpolation could go here, but direct is snappy for "magnetic" feel
					p.angle = targetAngle;
				} else {
					// Slowly return to 0? Or just stay. 
					// Let's make them slowly rotate back to 0
					p.angle *= 0.95;
				}

				this.drawCross(p.x, p.y, p.angle, intensity);
			});

			requestAnimationFrame(() => this.animate());
		}

		drawCross(x: number, y: number, angle: number, intensity: number) {
			const size = 3; 
			this.ctx.save();
			this.ctx.translate(x, y);
			this.ctx.rotate(angle);
			
			// If active, brighter (and use primary color if possible, or just opaque foreground)
			if (intensity > 0) {
                // We can also make the active color dynamic
                const style = getComputedStyle(document.documentElement);
                const primary = style.getPropertyValue('--primary');
                if (primary) {
                     this.ctx.strokeStyle = `hsl(${primary} / ${0.2 + intensity * 0.8})`;
                } else {
				     this.ctx.strokeStyle = `rgba(100, 100, 100, ${0.2 + intensity * 0.6})`;
                }
				this.ctx.lineWidth = 1 + intensity;
			} else {
                // strokeStyle is already set globally for the inactive state
			}

			this.ctx.beginPath();
			this.ctx.moveTo(-size, 0);
			this.ctx.lineTo(size, 0);
			this.ctx.moveTo(0, -size);
			this.ctx.lineTo(0, size);
			this.ctx.stroke();
			this.ctx.restore();
		}
	}

	// Initialize Grid (checking for reduced motion could be good, but we'll stick to basic)
	new MagneticGrid('magnetic-grid');


	// --- 2. Floating Glass Cards Animation ---
	// Random float effect
	gsap.to('.float-element', {
		y: (i) => i % 2 === 0 ? -15 : 15, // Alternate directions
		x: (i) => i % 2 === 0 ? 10 : -10,
		rotation: (i) => i % 2 === 0 ? 5 : -5,
		duration: 'random(4, 7)',
		repeat: -1,
		yoyo: true,
		ease: 'sine.inOut',
		stagger: {
			amount: 2,
			from: "random"
		}
	});

	// Reveal Cards
	gsap.to('.float-element', {
		opacity: (i) => [0.6, 0.4, 0.5][i] || 0.5, // Different opacities
		duration: 1.5,
		stagger: 0.3,
		ease: 'power2.out',
		delay: 0.5
	});


	// --- 3. Hero Content Animations ---
	const tl = gsap.timeline({
		defaults: { ease: 'power4.out' }
	});

	// Badge
	tl.from('#hero-badge', {
		y: -20,
		opacity: 0,
		duration: 1,
	});

	// Text Stagger
	tl.from('.hero-line', {
		yPercent: 120, // Explosive reveal
		skewY: 5,
		opacity: 0,
		duration: 1.2,
		stagger: 0.1,
	}, '-=0.8');

	// CTA & Desc
	tl.to(['#hero-desc', '#hero-cta'], {
		y: 0,
		opacity: 1,
		duration: 1,
		stagger: 0.2
	}, '-=0.8');

	// Scroll Indicator
	tl.to('#hero-scroll', {
		opacity: 1,
		duration: 1
	}, '-=0.5');

	// Loop scroll indicator
	gsap.to('#scroll-indicator', {
		yPercent: 100,
		duration: 1.5,
		repeat: -1,
		ease: 'power2.inOut'
	});

	// --- 4. Button Tilt Effect ---
	const buttons = document.querySelectorAll('.cta-button');
	buttons.forEach((btn) => {
		btn.addEventListener('mousemove', (e) => {
			const rect = (btn as HTMLElement).getBoundingClientRect();
			const x = e.clientX - rect.left - rect.width / 2;
			const y = e.clientY - rect.top - rect.height / 2;
			
			gsap.to(btn, {
				x: x * 0.15,
				y: y * 0.15,
				rotationX: -y * 0.1, // Tilt 3D
				rotationY: x * 0.1,
				duration: 0.2,
				ease: 'power1.out'
			});
		});

		btn.addEventListener('mouseleave', () => {
			gsap.to(btn, {
				x: 0,
				y: 0,
				rotationX: 0,
				rotationY: 0,
				duration: 0.6,
				ease: 'elastic.out(1, 0.4)'
			});
		});
	});
	// --- 5. Theme Toggle Logic ---
	const themeToggleBtn = document.getElementById('theme-toggle');
	
	const handleThemeToggle = () => {
		const element = document.documentElement;
		element.classList.toggle("dark");

		const isDark = element.classList.contains("dark");
		localStorage.setItem("theme", isDark ? "dark" : "light");
	};

	themeToggleBtn?.addEventListener("click", handleThemeToggle);
</script>
