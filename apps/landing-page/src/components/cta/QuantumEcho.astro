<section
  id="quantum-cta"
  class="relative z-30 min-h-[80vh] w-full flex items-center justify-center bg-background border-t border-border/40 overflow-hidden"
>
  <!-- Cinematic Ambient Glow Background -->
  <div class="absolute inset-0 z-0 overflow-hidden pointer-events-none">
    <div
      class="quantum-orb absolute top-1/2 left-1/4 w-[500px] h-[500px] bg-primary/20 rounded-full blur-[120px] opacity-40 mix-blend-screen"
    >
    </div>
    <div
      class="quantum-orb absolute bottom-0 right-1/4 w-[400px] h-[400px] bg-indigo-500/20 rounded-full blur-[100px] opacity-30 mix-blend-screen"
    >
    </div>
    <div
      class="absolute inset-0 bg-gradient-to-b from-background via-transparent to-background/80"
    >
    </div>
  </div>

  <div class="container relative z-10 mx-auto px-6 text-center">
    <div class="flex flex-col items-center justify-center space-y-10">
      <!-- Headline -->
      <div class="space-y-6 max-w-4xl mx-auto">
        <h2
          class="quantum-title text-5xl md:text-7xl font-bold tracking-tight text-foreground"
        >
          Ready to Accelerate Your Growth?
        </h2>

        <p
          class="quantum-text text-xl md:text-2xl text-muted-foreground max-w-2xl mx-auto font-light leading-relaxed"
        >
          Join thousands of creators who are scaling their Twitter presence with
          intelligent automation.
        </p>
      </div>

      <!-- Action Button -->
      <div class="pt-8">
        <a
          href="/login"
          class="quantum-btn relative inline-flex items-center justify-center px-12 py-6 text-xl font-medium text-primary-foreground bg-primary rounded-full hover:bg-primary/90 transition-colors duration-300 shadow-xl shadow-primary/20"
        >
          <span class="relative z-10">Start For Free</span>
          <div
            class="absolute inset-0 rounded-full bg-white/20 blur-md opacity-0 hover:opacity-100 transition-opacity duration-300"
          >
          </div>
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const section = document.getElementById("quantum-cta");
  const orbs = section?.querySelectorAll(".quantum-orb");
  const title = section?.querySelector(".quantum-title");
  const text = section?.querySelector(".quantum-text");
  const btn = section?.querySelector(".quantum-btn") as HTMLElement;

  if (section) {
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: section,
        start: "top 75%",
        toggleActions: "play none none reverse",
      },
    });

    // 1. Cinematic Entrance
    if (title && text && btn) {
      tl.fromTo(
        [title, text, btn],
        {
          y: 40,
          opacity: 0,
          filter: "blur(10px)",
        },
        {
          y: 0,
          opacity: 1,
          filter: "blur(0px)",
          duration: 1.2,
          stagger: 0.2,
          ease: "power3.out",
        },
      );
    }

    // 2. Ambient Orb Movement (Breathing Effect)
    if (orbs && orbs.length > 0) {
      orbs.forEach((orb, i) => {
        gsap.to(orb, {
          x: "random(-50, 50)",
          y: "random(-30, 30)",
          scale: "random(0.9, 1.1)",
          duration: "random(4, 7)",
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut",
          delay: i * 0.5,
        });
      });
    }

    // 3. Magnetic Button Effect
    if (btn) {
      btn.addEventListener("mousemove", (e: MouseEvent) => {
        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;

        gsap.to(btn, {
          x: x * 0.3, // Magnetic strength
          y: y * 0.3,
          duration: 0.3,
          ease: "power2.out",
        });
      });

      btn.addEventListener("mouseleave", () => {
        gsap.to(btn, {
          x: 0,
          y: 0,
          duration: 0.5,
          ease: "elastic.out(1, 0.3)",
        });
      });
    }

    // 4. Subtle Parallax on Mouse Move (Section)
    section.addEventListener("mousemove", (e) => {
      const xPercent = (e.clientX / window.innerWidth - 0.5) * 2; // -1 to 1
      const yPercent = (e.clientY / window.innerHeight - 0.5) * 2;

      if (orbs) {
        gsap.to(orbs, {
          x: xPercent * 30, // Slight shift opposite to cursor
          y: yPercent * 30,
          duration: 1.5,
          ease: "power2.out",
          overwrite: "auto", // Don't conflict with breathing too much (actually we need to be careful here)
        });
      }
    });
  }
</script>
