---
interface Props {
  index: number;
  class?: string;
}

const { index, class: className } = Astro.props;
---

<div 
  class:list={["profile-orb absolute flex items-center justify-center opacity-0 scale-0", className]} 
  data-index={index}
>
  <!-- Outer Glow -->
  <div class="absolute inset-0 rounded-full bg-primary/20 blur-xl animate-pulse-slow"></div>
  
  <!-- Profile Ring -->
  <div class="profile-ring relative w-12 h-12 md:w-16 md:h-16 rounded-full border-2 border-primary/40 bg-background/40 backdrop-blur-md overflow-hidden flex items-center justify-center group cursor-pointer hover:border-primary transition-all duration-500">
    <!-- Synced Green Background (Hidden initially) -->
    <div class="synced-bg absolute inset-0 bg-gradient-to-br from-emerald-500/30 via-green-400/20 to-emerald-600/40 opacity-0 transition-opacity duration-1000"></div>
    
    <!-- PFP Placeholder or Icon -->
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="profile-icon w-6 h-6 text-primary/60 group-hover:text-primary transition-colors">
      <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
      <circle cx="12" cy="7" r="4"></circle>
    </svg>
    
    <!-- Status Dot -->
    <div class="absolute bottom-1 right-1 w-3 h-3 rounded-full bg-green-500 border-2 border-background shadow-[0_0_10px_rgba(34,197,94,0.5)]"></div>
  </div>

  <!-- Synced Glow (Hidden initially) -->
  <div class="synced-glow absolute inset-0 rounded-full bg-emerald-500/40 blur-2xl opacity-0 scale-50 transition-all duration-1000 shadow-[0_0_40px_rgba(16,185,129,0.3)]"></div>

  <!-- Floating Data Badge (Visible on specific trigger) -->
  <div class="data-badge absolute -top-8 bg-primary text-primary-foreground px-2 py-0.5 rounded text-[10px] font-bold opacity-0 translate-y-2 pointer-events-none">
    SYNCED
  </div>
</div>

<style>
  @keyframes pulse-slow {
    0%, 100% { transform: scale(1); opacity: 0.3; }
    50% { transform: scale(1.15); opacity: 0.5; }
  }

  .animate-pulse-slow {
    animation: pulse-slow 3s ease-in-out infinite;
  }
</style>
